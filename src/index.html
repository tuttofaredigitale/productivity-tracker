<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Productivity Tracker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <h1>PRODUCTIVITY_TRACKER</h1>
        <span class="version">v1.0</span>
      </div>
      <nav class="nav">
        <button class="nav-btn active" data-view="dashboard">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10" />
            <polyline points="12 6 12 12 16 14" />
          </svg>
          Dashboard
        </button>
        <button class="nav-btn" data-view="analytics">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="20" x2="18" y2="10" />
            <line x1="12" y1="20" x2="12" y2="4" />
            <line x1="6" y1="20" x2="6" y2="14" />
          </svg>
          Analytics
        </button>
        <button class="nav-btn" data-view="ai">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2a8 8 0 0 1 8 8v12l-4-4H8a8 8 0 0 1-8-8 8 8 0 0 1 8-8h4z" />
          </svg>
          AI Insights
        </button>
        <button class="sync-btn" id="syncBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="17 8 12 3 7 8" />
            <line x1="12" y1="3" x2="12" y2="15" />
          </svg>
          <span>Sync</span>
        </button>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Dashboard View -->
      <div id="dashboardView" class="view active">
        <!-- Timer Section -->
        <section class="timer-section">
          <div class="timer-display" id="timerDisplay">00:00:00</div>
          <div class="timer-project" id="timerProject">Select a project</div>

          <!-- Pomodoro Selector -->
          <div class="pomodoro-selector" id="pomodoroSelector">
            <button class="pomo-btn active" data-duration="1500" data-type="work">25 min</button>
            <button class="pomo-btn" data-duration="3000" data-type="work">50 min</button>
            <button class="pomo-btn" data-duration="300" data-type="break">5 min ☕</button>
            <button class="pomo-btn" data-duration="900" data-type="break">15 min ☕</button>
            <button class="pomo-btn" data-duration="0" data-type="free">Free ∞</button>
          </div>

          <div class="timer-controls">
            <button class="timer-btn stop hidden" id="stopBtn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <rect x="6" y="6" width="12" height="12" />
              </svg>
              Stop & Save
            </button>
          </div>
        </section>

        <!-- Stats Cards -->
        <section class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon" style="color: var(--accent-green)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 6 12 12 16 14" />
              </svg>
            </div>
            <div class="stat-label">TODAY</div>
            <div class="stat-value" id="todayTotal" style="color: var(--accent-green)">00:00:00</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="color: var(--accent-cyan)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                <line x1="16" y1="2" x2="16" y2="6" />
                <line x1="8" y1="2" x2="8" y2="6" />
                <line x1="3" y1="10" x2="21" y2="10" />
              </svg>
            </div>
            <div class="stat-label">THIS WEEK</div>
            <div class="stat-value" id="weekTotal" style="color: var(--accent-cyan)">00:00:00</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="color: var(--accent-orange)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
              </svg>
            </div>
            <div class="stat-label">SESSIONS</div>
            <div class="stat-value" id="sessionCount" style="color: var(--accent-orange)">0</div>
          </div>
        </section>

        <!-- Projects Section -->
        <section class="projects-section">
          <div class="section-header">
            <h2>PROJECTS</h2>
            <button class="add-btn" id="addProjectBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19" />
                <line x1="5" y1="12" x2="19" y2="12" />
              </svg>
              New
            </button>
          </div>

          <!-- Add Project Form (hidden by default) -->
          <div class="add-project-form hidden" id="addProjectForm">
            <input type="text" id="newProjectName" placeholder="Project name..." maxlength="50">
            <input type="color" id="newProjectColor" value="#00ff88">
            <button class="confirm-btn" id="confirmAddProject">Add</button>
            <button class="cancel-btn" id="cancelAddProject">Cancel</button>
          </div>

          <div class="projects-list" id="projectsList">
            <!-- Projects rendered by JS -->
          </div>
        </section>
      </div>

      <!-- Analytics View -->
      <div id="analyticsView" class="view">
        <section class="chart-section">
          <h3>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" />
              <polyline points="12 6 12 12 16 14" />
            </svg>
            Today's Productivity (by hour)
          </h3>
          <div class="chart-container">
            <canvas id="hourlyChart"></canvas>
          </div>
        </section>

        <section class="chart-section">
          <h3>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
            </svg>
            Weekly Trend (hours)
          </h3>
          <div class="chart-container">
            <canvas id="weeklyChart"></canvas>
          </div>
        </section>

        <section class="chart-section">
          <h3>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21.21 15.89A10 10 0 1 1 8 2.83" />
              <path d="M22 12A10 10 0 0 0 12 2v10z" />
            </svg>
            Project Distribution (week)
          </h3>
          <div class="chart-row">
            <div class="chart-container pie-container">
              <canvas id="projectsChart"></canvas>
            </div>
            <div class="projects-legend" id="projectsLegend">
              <!-- Legend rendered by JS -->
            </div>
          </div>
        </section>
      </div>

      <!-- AI View -->
      <div id="aiView" class="view">
        <section class="ai-section">
          <div class="ai-header">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent-orange)" stroke-width="2">
              <path d="M12 2a8 8 0 0 1 8 8v12l-4-4H8a8 8 0 0 1-8-8 8 8 0 0 1 8-8h4z" />
            </svg>
            <h2>AI Analysis & Suggestions</h2>
          </div>
          <p class="ai-description">
            Generate personalized suggestions based on your productivity patterns.
            Choose your preferred AI provider.
          </p>

          <div class="ai-config">
            <div class="config-row">
              <label for="aiProvider">Provider:</label>
              <select id="aiProvider">
                <!-- Populated by JS -->
              </select>
              <a id="providerDocs" href="#" target="_blank" class="docs-link" title="Get API Key">?</a>
            </div>

            <div class="config-row">
              <label for="aiModel">Model:</label>
              <select id="aiModel">
                <!-- Populated by JS -->
              </select>
            </div>

            <div class="config-row" id="apiKeyRow">
              <label for="apiKeyInput">API Key:</label>
              <input type="password" id="apiKeyInput" placeholder="sk-..." autocomplete="off">
              <button class="save-key-btn" id="saveApiKey">Save</button>
            </div>
          </div>

          <button class="generate-btn" id="generateAI">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
            </svg>
            Generate AI Suggestions
          </button>

          <div class="ai-results" id="aiResults">
            <div class="ai-placeholder">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
                opacity="0.3">
                <path d="M12 2a8 8 0 0 1 8 8v12l-4-4H8a8 8 0 0 1-8-8 8 8 0 0 1 8-8h4z" />
              </svg>
              <p>Click the button to generate personalized analysis</p>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Sessions Log (collapsible) -->
    <aside class="sessions-panel" id="sessionsPanel">
      <button class="sessions-toggle" id="sessionsToggle">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="8" y1="6" x2="21" y2="6" />
          <line x1="8" y1="12" x2="21" y2="12" />
          <line x1="8" y1="18" x2="21" y2="18" />
          <line x1="3" y1="6" x2="3.01" y2="6" />
          <line x1="3" y1="12" x2="3.01" y2="12" />
          <line x1="3" y1="18" x2="3.01" y2="18" />
        </svg>
        Today's Sessions
        <span class="badge" id="sessionsBadge">0</span>
      </button>
      <div class="sessions-list hidden" id="sessionsList">
        <!-- Sessions rendered by JS -->
      </div>
    </aside>
  </div>

  <!-- Chart.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="config.js"></script>
  <script src="app.js"></script>
</body>

</html>